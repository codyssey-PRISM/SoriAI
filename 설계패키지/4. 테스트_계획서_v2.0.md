# **Sori AI - 테스트 계획서 v2.0**

> **작성 날짜:** 2025-11
> **프로젝트:** Sori AI (Hyper-Personalized AI Care Call Service)  
> **MVP 목표:** Vapi(Voice AI) 기반 자동화 통화 및 데이터 파이프라인 신뢰성 검증 (데이터 유실률 0%, 리포트 생성 정확성)  
> **기준:** 전체 서비스 기획 및 UX 설계 v3.0, 스프린트 백로그 v2.0 반영  
> **문서 버전:** v1.0

---

## **1. 테스트 계획 개요 (Test Plan Overview)**

### **1.1. 목적 (Purpose)**

본 테스트 계획서는 Sori AI MVP 개발 과정에서 수행할 모든 테스트 활동을 정의하고, 각 기능의 품질과 안정성을 보장하기 위한 전략과 기준을 제시합니다. 특히 **데이터 파이프라인 신뢰성 검증 (데이터 유실률 0%, 리포트 생성 정확성)**과 **AI 통화 시스템의 신뢰성** 검증에 중점을 둡니다.

### **1.2. 범위 (Scope)**

**포함 범위:**
- 인증/온보딩 시스템 (A-1, A-2, A-3)
- AI 음성 통화 시스템 (B-1, B-2)
- 통화 상세 리포트 파이프라인 (C-1, C-2, C-3)
- 설정 및 정보 관리 (D-1)
- 데이터 파이프라인 무결성 검증

**제외 범위:**
- 상세 건강 상태 분석 및 관리 (바이오마커 등) - 후순위 개발
- 주간/월간 인사이트 그래프 (C-3) - 고도화 기능 (MVP 제외)
- 실시간 대화 (`/chat`) - 향후 확장 기능 (MVP 제외)
- 온기 리포트 (`/report`) - 향후 확장 기능 (MVP 제외)
- 인바운드 통화 처리 - 향후 확장 기능

### **1.3. 테스트 목표 (Test Objectives)**

1. **데이터 파이프라인 신뢰성 검증:**
   - Vapi Webhook 수신 → 데이터 파싱 → DB 적재 → 리포트 생성까지의 전체 파이프라인 정확성
   - 데이터 유실률 0% 달성
   - 리포트 생성 정확성 및 일관성 검증

2. **시스템 안정성 검증:**
   - 통화 발신 성공률 95% 이상
   - APScheduler 트리거 정확도 검증
   - 동시 발신 부하 처리 능력 검증

3. **기능 완결성 검증:**
   - AI 대화 시나리오 완결성 (80% 이상)
   - 핵심 정보 질문 수행률 (90% 이상)
   - 사용자 시나리오 기반 E2E 테스트 통과

4. **데이터 정합성 검증:**
   - 실제 통화 내용과 생성된 요약 리포트의 일치율 90% 이상
   - 프롬프트 주입 정확성 검증

5. **UX/UI 품질 검증:**
   - 통화 상세 리포트 전체 페이지 레이아웃 정확성
   - 반응형 디자인 검증
   - 접근성 및 사용성 검증

---

## **2. 테스트 전략 (Test Strategy)**

### **2.1. 테스트 레벨 (Test Levels)**

#### **2.1.1. 단위 테스트 (Unit Testing)**

**목적:** 개별 함수, 메서드, 컴포넌트의 정확성 검증

**범위:**
- Backend: API 엔드포인트, 비즈니스 로직, 데이터 모델 검증
- Frontend: React 컴포넌트, 유틸리티 함수, 폼 유효성 검사
- AI: 프롬프트 생성 로직, 데이터 변환 함수

**도구:**
- Backend (FastAPI): pytest (Python)
- Frontend (Next.js/React): Jest, React Testing Library
- Database (SQLite): 테스트 DB (in-memory 또는 별도 테스트 DB)
- Coverage 목표: **80% 이상**

**테스트 케이스 예시:**
- 이메일 코드 검증 로직 (유효성, 만료 시간)
- 스케줄 데이터 유효성 검사
- 프롬프트 변환 로직 (건강 정보 → 프롬프트)
- 리포트 데이터 파싱 로직
- 통화 상세 리포트 컴포넌트 렌더링

---

#### **2.1.2. 통합 테스트 (Integration Testing)**

**목적:** 시스템 간 상호작용 및 데이터 흐름 검증

**범위:**
- API ↔ Database 연동
- Frontend ↔ Backend API 통신
- APScheduler ↔ Vapi API 연동
- Vapi Webhook → Backend → Database 파이프라인

**도구:**
- Backend (FastAPI): pytest, FastAPI TestClient, Postman/Newman
- Frontend (Next.js/React): MSW (Mock Service Worker)
- Database (SQLite): 테스트 DB (in-memory 또는 별도 테스트 DB)
- E2E: Playwright
- iOS 앱: Xcode Test, XCTest

**테스트 케이스 예시:**
- 온보딩 완료 → 프로필 DB 저장 → APScheduler 등록
- 통화 스케줄 트리거 → Vapi API 호출 → 통화 상태 업데이트
- Vapi Webhook 수신 → 데이터 파싱 → 리포트 생성 → DB 적재
- 대시보드 → 통화 상세 리포트 페이지 이동

---

#### **2.1.3. E2E 테스트 (End-to-End Testing)**

**목적:** 사용자 시나리오 기반 전체 시스템 검증

**범위:**
- 사용자 여정 전체 플로우 (웹)
- 통화 발신 → 대화 → 리포트 생성 → UI 표시
- 통화 상세 리포트 페이지 네비게이션
- iOS 앱 통화 수신/발신 기능
- Vapi 통화 연동 및 Webhook 수신
- 에러 처리 및 예외 상황

**도구:**
- 웹 E2E: Playwright
- iOS 앱: Xcode Test, XCTest
- Vapi 통화: Vapi Dashboard, 통화 시뮬레이션
- 테스트 환경: Staging 환경

**테스트 시나리오:**
1. **온보딩 → 통화 → 리포트 확인 플로우 (웹)**
   - 이메일 로그인 → 온보딩 가이드 → 온보딩 완료 → 통화 발신 대기 → 리포트 확인 → 통화 상세 리포트 페이지 확인

2. **iOS 앱 통화 수신/발신 플로우**
   - iOS 앱 설치 → 초대 코드 입력 → 통화 수신 → 통화 발신

3. **Vapi 통화 연동 플로우**
   - 통화 스케줄 트리거 → Vapi API 호출 → iOS 앱 통화 수신 → 대화 진행 → 통화 종료 → Webhook 수신

4. **통화 실패 처리 플로우**
   - 통화 미수신 → 재시도 로직 → 실패 처리

5. **리포트 생성 및 표시 플로우**
   - 통화 완료 → Webhook 수신 → 리포트 생성 → 대시보드 표시 → 통화 상세 리포트 페이지 확인

6. **통화 상세 리포트 페이지 플로우**
   - 대시보드에서 통화 상세 리포트 버튼 클릭 → 전체 페이지 이동 → 2컬럼 레이아웃 확인 → 내부 스크롤 확인

---

### **2.2. 테스트 유형 (Test Types)**

#### **2.2.1. 기능 테스트 (Functional Testing)**

**목적:** 각 기능이 요구사항에 맞게 작동하는지 검증

**테스트 항목:**
- 인증/온보딩 기능
- 통화 발신 및 관리
- 리포트 생성 및 표시
- 통화 상세 리포트 페이지
- 설정 및 정보 수정

**검증 기준:**
- Acceptance Criteria (AC) 100% 충족
- 사용자 스토리 기반 검증

---

#### **2.2.2. 성능 테스트 (Performance Testing)**

**목적:** 시스템 성능 목표 달성 여부 검증

**테스트 항목:**
- **Latency 테스트:**
  - Vapi API 호출 Latency < 2초
  - Vapi 음성 응답 속도 (Turn-taking) < 1.5초

- **처리 시간 테스트:**
  - 통화 종료 후 리포트 생성 시간 < 10분
  - 리포트 조회 API 응답 시간 < 1초
  - 통화 상세 리포트 페이지 로딩 시간 < 2초

- **부하 테스트:**
  - 동시 10콜 이상 발신 시 누락 없이 처리
  - 동시 리포트 생성 요청 처리

**도구:**
- k6, Apache JMeter
- Vapi API 모니터링 도구

---

#### **2.2.3. 보안 테스트 (Security Testing)**

**목적:** 보안 요구사항 준수 여부 검증

**테스트 항목:**
- 이메일 코드 인증 보안 (만료 시간, 재시도 제한)
- User 정보 반환 검증 (JWT 토큰은 향후 구현 예정)
- PII 데이터 암호화 저장
- Row-Level Security (보호자별 데이터 접근 제어)
- API 인증 및 권한 검증

**도구:**
- OWASP ZAP (정적 분석)
- 수동 보안 검토

---

#### **2.2.4. 사용성 테스트 (Usability Testing)**

**목적:** 사용자 경험 및 UI/UX 품질 검증

**테스트 항목:**
- 온보딩 플로우 직관성 (가이드 → Step 1-5 → 완료)
- 통화 상세 리포트 페이지 가독성
- 2컬럼 레이아웃 사용성
- 내부 스크롤 동작 정확성
- 에러 메시지 명확성
- 반응형 디자인 (모바일/데스크톱)

**검증 방법:**
- 내부 사용성 검토
- 실제 사용자 피드백 (선택적)

---

#### **2.2.5. 데이터 무결성 테스트 (Data Integrity Testing)**

**목적:** 데이터 파이프라인 신뢰성 검증 (데이터 유실률 0%, 리포트 생성 정확성)

**테스트 항목:**
- **데이터 유실 검증:**
  - 모든 통화 데이터가 DB에 저장되는지 확인
  - Webhook 수신 실패 시 재시도 로직 작동 확인
  - 리포트 생성 실패율 < 1%

- **데이터 정합성 검증:**
  - 실제 통화 내용과 리포트 요약 일치율 90% 이상
  - 프롬프트 주입 정확성 (건강 정보 반영)
  - 스케줄 데이터와 실제 발신 시간 일치
  - 통화 상세 리포트 데이터 정확성

- **데이터 일관성 검증:**
  - 리포트 생성 시간 일관성
  - 태그 추출 정확성 (식사/복약/감정)
  - 상태 분석 정확성 (좋음/보통/나쁨)

**검증 방법:**
- 샘플 통화 데이터 기반 수동 검증
- 자동화된 데이터 검증 스크립트
- 로그 분석 및 모니터링

---

### **2.3. 테스트 도구 (Test Tools)**

| 테스트 유형 | 도구 | 용도 |
| :--- | :--- | :--- |
| **단위 테스트 (Frontend)** | Jest, React Testing Library | Next.js/React 컴포넌트 및 함수 테스트 |
| **단위 테스트 (Backend)** | pytest | FastAPI 엔드포인트 및 비즈니스 로직 테스트 |
| **통합 테스트** | pytest (FastAPI), MSW (Frontend), Postman | API ↔ Database, Frontend ↔ Backend 통신 테스트 |
| **E2E 테스트** | Playwright | 전체 플로우 검증 (웹) |
| **iOS 앱 테스트** | Xcode Test, XCTest | iOS 앱 통화 수신/발신 기능 테스트 |
| **Vapi 통화 테스트** | Vapi Dashboard, 통화 시뮬레이션 | Vapi 통화 발신/수신 및 Webhook 테스트 |
| **성능 테스트** | k6, Apache JMeter | 부하 및 성능 테스트 |
| **코드 커버리지** | Jest Coverage (Frontend), Coverage.py (Backend) | 테스트 커버리지 측정 |
| **모니터링** | Vapi Dashboard, 로그 시스템 | 실시간 시스템 모니터링 |

---

### **2.4. 테스트 커버리지 목표 (Coverage Goals)**

| 레벨 | 커버리지 목표 | 측정 기준 |
| :--- | :--- | :--- |
| **단위 테스트** | 80% 이상 | 코드 라인 커버리지 |
| **통합 테스트** | 핵심 플로우 100% | 주요 API 엔드포인트 |
| **E2E 테스트** | 사용자 시나리오 100% | 핵심 사용자 여정 |
| **기능 테스트** | AC 100% 충족 | 모든 Acceptance Criteria |

---

## **3. 테스트 데이터 전략 (Test Data Strategy)**

### **3.1. 테스트 데이터 유형**

#### **3.1.1. 정상 데이터 (Valid Data)**
- 정상적인 사용자 입력 데이터
- 유효한 이메일 주소
- 올바른 스케줄 설정
- 정상적인 통화 응답 시나리오

#### **3.1.2. 비정상 데이터 (Invalid Data)**
- 잘못된 이메일 형식
- 잘못된 시간 설정 (과거 시간, 잘못된 형식)
- 필수 입력 항목 누락
- 잘못된 코드 입력

#### **3.1.3. 경계값 데이터 (Boundary Data)**
- 이메일 코드 만료 시간 (10분)
- 최대 통화 시간 (10분)
- 최대 동시 발신 수 (10콜)
- 최대 리포트 생성 시간 (10분)

#### **3.1.4. 통화 시뮬레이션 데이터**
- 정상 통화 응답 시나리오
- 통화 미수신 시나리오
- 중간에 끊기는 통화 시나리오
- 다양한 감정 상태 응답 (좋음/보통/나쁨)

---

### **3.2. 테스트 데이터 관리**

**원칙:**
- 프로덕션 데이터 사용 금지
- 테스트 데이터는 격리된 환경에서만 사용
- 개인정보 보호 준수 (가명화 처리)

**데이터 생성 방법:**
- 자동화된 테스트 데이터 생성 스크립트
- Mock 데이터 사용 (개발/테스트 환경)
- 샘플 데이터 세트 준비

---

## **4. Acceptance Criteria (AC) 및 검증 기준**

### **4.1. Phase 1: 인증/온보딩**

#### **A-1: 이메일 코드 로그인**

**Acceptance Criteria:**
- [x] 사용자가 이메일을 입력하면 6자리 코드가 발송됨 ✅
- [x] 코드는 10분간 유효하며, 만료 시 재발송 가능 ✅
- [x] 코드 검증 성공 시 User 정보가 반환됨 ✅ (JWT 토큰은 향후 구현 예정)
- [x] 잘못된 코드 입력 시 명확한 에러 메시지 표시 ✅
- [ ] 코드 발송 실패 시 재시도 가능 (구현 예정)
- [x] 이메일 형식 유효성 검사 통과 ✅

**테스트 케이스:**
| TC-ID | 테스트 케이스 | 예상 결과 | 우선순위 |
| :--- | :--- | :--- | :--- |
| TC-A1-01 | 유효한 이메일 입력 후 코드 발송 요청 | 6자리 코드 발송, 이메일 수신 확인 | P0 |
| TC-A1-02 | 발송된 코드로 인증 시도 | User 정보 반환 (JWT 토큰은 향후 구현 예정) | P0 |
| TC-A1-03 | 만료된 코드로 인증 시도 | "코드가 만료되었습니다" 에러 메시지 | P0 |
| TC-A1-04 | 잘못된 코드 입력 | "코드가 일치하지 않습니다" 에러 메시지 | P0 |
| TC-A1-05 | 잘못된 이메일 형식 입력 | "올바른 이메일 형식을 입력해주세요" 에러 메시지 | P0 |
| TC-A1-06 | 코드 재발송 요청 | 새로운 코드 발송, 이전 코드 무효화 | P1 |

---

#### **A-2: 프로필/스케줄 설정**

**Acceptance Criteria:**
- [ ] 온보딩 가이드 3-Step Slider가 정상 작동함
- [ ] 온보딩 5단계가 순차적으로 진행됨
- [ ] 각 Step에서 이전/다음 버튼으로 이동 가능
- [ ] 진행 인디케이터(1-5 버튼) 클릭 시 해당 Step으로 이동 가능
- [ ] 필수 입력 항목 미입력 시 다음 버튼 비활성화
- [ ] 입력 데이터가 DB에 정확히 저장됨
- [ ] 통화 스케줄이 APScheduler에 정확히 등록됨
- [ ] 잘못된 시간 설정 시 에러 메시지 표시
- [ ] Step 5에서 Accordion UI로 정보 요약 표시
- [ ] 필수 동의 체크 전까지 완료 버튼 비활성화
- [ ] 온보딩 완료 시 초대 코드 카드 표시
- [ ] 초대 코드 복사 기능 작동

**테스트 케이스:**
| TC-ID | 테스트 케이스 | 예상 결과 | 우선순위 |
| :--- | :--- | :--- | :--- |
| TC-A2-01 | 온보딩 가이드 3-Step Slider 진행 | 각 슬라이드가 정상적으로 전환됨 | P0 |
| TC-A2-02 | 온보딩 Step 1-5 순차 진행 | 각 Step이 정상적으로 진행됨 | P0 |
| TC-A2-03 | 진행 인디케이터 클릭으로 Step 이동 | 해당 Step으로 정확히 이동 | P0 |
| TC-A2-04 | 필수 입력 항목 미입력 시 다음 버튼 클릭 | 다음 버튼 비활성화, 에러 메시지 표시 | P0 |
| TC-A2-05 | 온보딩 완료 후 데이터 저장 확인 | DB에 모든 데이터 정확히 저장됨 | P0 |
| TC-A2-06 | 통화 스케줄 APScheduler 등록 확인 | 스케줄이 정확히 등록됨 | P0 |
| TC-A2-07 | 과거 시간으로 스케줄 설정 시도 | "과거 시간은 설정할 수 없습니다" 에러 메시지 | P0 |
| TC-A2-08 | Step 5에서 정보 요약 표시 | Accordion UI로 모든 정보 정확히 표시 | P1 |
| TC-A2-09 | 필수 동의 미체크 시 완료 버튼 클릭 | 완료 버튼 비활성화 | P0 |
| TC-A2-10 | 온보딩 완료 시 초대 코드 카드 표시 | 초대 코드 카드 정상 표시 | P0 |
| TC-A2-11 | 초대 코드 복사 기능 확인 | 코드가 클립보드에 복사됨 | P0 |

---

#### **A-3: 건강 정보 입력 및 프롬프트 주입 (선택 입력)**

**Acceptance Criteria:**
- [ ] 건강 정보 입력 없이 온보딩 완료 가능
- [ ] 주요 질환/복약 정보 선택 입력 가능 (선택 사항)
- [ ] 입력된 건강 정보가 DB에 저장됨
- [ ] 건강 정보가 Vapi 프롬프트에 정확히 주입됨 (입력한 경우)
- [ ] 테스트 통화에서 AI가 입력된 약 이름을 정확히 발화함 (입력한 경우)
- [ ] 테스트 통화에서 AI가 입력된 질환 관련 질문을 수행함 (입력한 경우)

**테스트 케이스:**
| TC-ID | 테스트 케이스 | 예상 결과 | 우선순위 |
| :--- | :--- | :--- | :--- |
| TC-A3-01 | 건강 정보 입력 없이 온보딩 완료 | 온보딩 정상 완료 | P0 |
| TC-A3-02 | 건강 정보 입력 후 저장 확인 | DB에 건강 정보 정확히 저장됨 | P0 |
| TC-A3-03 | 건강 정보 입력 후 프롬프트 주입 확인 | 프롬프트에 건강 정보 반영됨 | P0 |
| TC-A3-04 | 테스트 통화에서 약 이름 발화 확인 | AI가 입력된 약 이름 정확히 발화 | P1 |
| TC-A3-05 | 테스트 통화에서 질환 관련 질문 확인 | AI가 질환 관련 질문 수행 | P1 |

---

### **4.2. Phase 2: AI 음성 통화**

#### **B-1: Vapi 아웃바운드 통화**

**Acceptance Criteria:**
- [ ] 예약된 시간에 정확히 통화 발신됨
- [ ] Vapi API 호출 Latency가 2초 이내
- [ ] 통화 발신 성공률 95% 이상
- [ ] 수신 실패 시 재시도 로직 작동 (최대 2회)
- [ ] 통화 상태가 실시간으로 DB에 저장됨
- [ ] 동시 10콜 이상 발신 시 누락 없이 처리
- [ ] 통화 발신 실패 시 에러 로그 기록 및 알림 발송

**테스트 케이스:**
| TC-ID | 테스트 케이스 | 예상 결과 | 우선순위 |
| :--- | :--- | :--- | :--- |
| TC-B1-01 | 예약된 시간에 통화 발신 확인 | 정확한 시간에 통화 발신됨 | P0 |
| TC-B1-02 | Vapi API 호출 Latency 측정 | 2초 이내 응답 | P0 |
| TC-B1-03 | 통화 발신 성공률 측정 (100회 테스트) | 95% 이상 성공 | P0 |
| TC-B1-04 | 통화 미수신 시 재시도 로직 확인 | 최대 2회 재시도 후 실패 처리 | P0 |
| TC-B1-05 | 통화 상태 DB 저장 확인 | 발신 중/완료/실패 상태 정확히 저장 | P0 |
| TC-B1-06 | 동시 10콜 발신 부하 테스트 | 모든 통화 정상 발신됨 | P0 |
| TC-B1-07 | 통화 발신 실패 시 에러 로그 확인 | 에러 로그 기록 및 알림 발송 | P0 |

---

#### **B-2: AI 시나리오 수행**

**Acceptance Criteria:**
- [ ] AI가 안부 인사로 대화 시작
- [ ] AI가 건강(약 복용) 질문 수행
- [ ] AI가 식사 여부 질문 수행
- [ ] AI가 수면 상태 질문 수행
- [ ] AI가 대화 맥락을 잃지 않고 3턴 이상 유의미한 대화 지속
- [ ] AI가 끝인사까지 완료한 통화 비율 80% 이상
- [ ] AI가 약 복용/식사 등 핵심 정보 질문 수행률 90% 이상
- [ ] 상황별 적절한 리액션 수행 (예: 약 미복용 시 권유)

**테스트 케이스:**
| TC-ID | 테스트 케이스 | 예상 결과 | 우선순위 |
| :--- | :--- | :--- | :--- |
| TC-B2-01 | 통화 시작 시 안부 인사 확인 | "안녕하세요" 등 인사 발화 | P0 |
| TC-B2-02 | 약 복용 질문 수행 확인 | "오늘 약 드셨어요?" 질문 수행 | P0 |
| TC-B2-03 | 식사 여부 질문 수행 확인 | "오늘 식사 하셨어요?" 질문 수행 | P0 |
| TC-B2-04 | 대화 완결성 확인 (10회 테스트) | 80% 이상 끝인사까지 완료 | P0 |
| TC-B2-05 | 핵심 정보 질문 수행률 확인 (10회 테스트) | 90% 이상 질문 수행 | P0 |
| TC-B2-06 | 약 미복용 시 권유 리액션 확인 | "지금 드시는 게 좋겠어요" 등 권유 | P1 |
| TC-B2-07 | 대화 맥락 유지 확인 (3턴 이상) | 맥락을 잃지 않고 대화 지속 | P0 |

---

### **4.3. Phase 3: 통화 상세 리포트**

#### **C-1: 데이터 파이프라인**

**Acceptance Criteria:**
- [ ] Vapi Webhook이 정확히 수신됨
- [ ] 통화 종료 후 10분 이내 리포트 생성 완료
- [ ] 데이터 유실률 0% (모든 통화 데이터 저장)
- [ ] Recording 파일이 안전하게 저장됨
- [ ] Transcript가 정확히 파싱됨
- [ ] 요약이 생성되고 DB에 저장됨 (2-3줄)
- [ ] 태그가 추출되고 DB에 저장됨 (식사/복약/감정)
- [ ] 상태 분석 데이터가 생성되고 DB에 저장됨 (좋음/보통/나쁨)
- [ ] Webhook 수신 실패 시 재시도 로직 작동

**테스트 케이스:**
| TC-ID | 테스트 케이스 | 예상 결과 | 우선순위 |
| :--- | :--- | :--- | :--- |
| TC-C1-01 | Vapi Webhook 수신 확인 | Webhook 정확히 수신됨 | P0 |
| TC-C1-02 | 리포트 생성 시간 측정 | 10분 이내 리포트 생성 완료 | P0 |
| TC-C1-03 | 데이터 유실 검증 (100회 테스트) | 모든 통화 데이터 저장, 유실률 0% | P0 |
| TC-C1-04 | Recording 파일 저장 확인 | 파일 안전하게 저장됨 | P0 |
| TC-C1-05 | Transcript 파싱 정확성 확인 | 원본 대화 내용과 일치 | P0 |
| TC-C1-06 | 요약 생성 및 DB 저장 확인 | 요약 정확히 생성 및 저장됨 (2-3줄) | P0 |
| TC-C1-07 | 태그 추출 정확성 확인 | 식사/복약/감정 태그 정확히 추출 | P0 |
| TC-C1-08 | 상태 분석 데이터 생성 확인 | 좋음/보통/나쁨 중 하나 정확히 생성 | P0 |
| TC-C1-09 | Webhook 수신 실패 시 재시도 확인 | 재시도 로직 작동, 최종 성공 | P0 |

---

#### **C-2: 통화 상세 리포트 UI**

**Acceptance Criteria:**
- [ ] 통화 종료 후 리포트가 대시보드에 표시됨
- [ ] 대시보드에서 통화 상세 리포트 버튼 클릭 시 `/call-history/[id]` 전체 페이지로 이동
- [ ] 전체 통화 기록에서 통화 상세 리포트 버튼 클릭 시 `/call-history/[id]` 전체 페이지로 이동
- [ ] 통화 상세 리포트 페이지가 2컬럼 레이아웃으로 표시됨
- [ ] 좌측 컬럼에 통화 기본 정보, 상태 분석, 주요 확인 사항, 키워드 태그가 표시됨
- [ ] 우측 컬럼에 AI 요약(2-3줄)과 대화 전체 로그가 표시됨
- [ ] 상태 분석이 3개 상태 버튼(좋음/보통/나쁨)으로 표시되고 현재 상태가 강조됨
- [ ] 주요 확인 사항이 체크리스트 형식으로 표시됨
- [ ] 대화 전체 로그가 채팅 UI 형식으로 표시됨
- [ ] 페이지 스크롤 없이 내부 스크롤만 작동함
- [ ] 모바일/데스크톱에서 모두 정상 표시됨
- [ ] 리포트가 없을 때 Empty State 표시

**테스트 케이스:**
| TC-ID | 테스트 케이스 | 예상 결과 | 우선순위 |
| :--- | :--- | :--- | :--- |
| TC-C2-01 | 통화 종료 후 리포트 표시 확인 | 대시보드에 리포트 카드 표시 | P0 |
| TC-C2-02 | 대시보드에서 통화 상세 리포트 버튼 클릭 | `/call-history/[id]` 전체 페이지로 이동 | P0 |
| TC-C2-03 | 전체 통화 기록에서 통화 상세 리포트 버튼 클릭 | `/call-history/[id]` 전체 페이지로 이동 | P0 |
| TC-C2-04 | 통화 상세 리포트 페이지 2컬럼 레이아웃 확인 | 좌측/우측 컬럼 정확히 표시됨 | P0 |
| TC-C2-05 | 좌측 컬럼 섹션 확인 | 통화 기본 정보, 상태 분석, 주요 확인 사항, 키워드 태그 표시 | P0 |
| TC-C2-06 | 우측 컬럼 섹션 확인 | AI 요약(2-3줄), 대화 전체 로그 표시 | P0 |
| TC-C2-07 | 상태 분석 3개 버튼 확인 | 좋음/보통/나쁨 버튼 표시, 현재 상태 강조 | P0 |
| TC-C2-08 | 주요 확인 사항 체크리스트 확인 | 식사/복약/기분 체크리스트 형식 표시 | P0 |
| TC-C2-09 | 대화 전체 로그 채팅 UI 확인 | 채팅 UI 형식으로 표시, 소리/어르신 메시지 구분 | P0 |
| TC-C2-10 | 내부 스크롤 확인 | 페이지 스크롤 없이 내부 스크롤만 작동 | P0 |
| TC-C2-11 | 반응형 디자인 확인 | 모바일/데스크톱 모두 정상 표시 | P0 |
| TC-C2-12 | 리포트 없을 때 Empty State 확인 | Empty State 메시지 표시 | P1 |

---

#### **C-3: 대시보드 통화 기록 UI**

**Acceptance Criteria:**
- [ ] 대시보드에 최근 통화 기록이 Timeline 형식으로 표시됨
- [ ] 접힌 상태에서 첫 줄만 표시됨 (50자 제한)
- [ ] 펼친 상태에서 전체 요약 표시됨
- [ ] 전체 통화 기록 페이지가 Feed 형식으로 표시됨
- [ ] 페이지네이션이 정상 작동함 (10개씩 표시)
- [ ] 통화 상세 리포트 버튼 클릭 시 전체 페이지로 이동

**테스트 케이스:**
| TC-ID | 테스트 케이스 | 예상 결과 | 우선순위 |
| :--- | :--- | :--- | :--- |
| TC-C3-01 | 대시보드 최근 통화 기록 Timeline 확인 | Timeline 형식으로 표시됨 | P0 |
| TC-C3-02 | 접힌 상태 첫 줄 표시 확인 | 50자 제한으로 첫 줄만 표시 | P0 |
| TC-C3-03 | 펼친 상태 전체 요약 표시 확인 | 전체 요약 표시됨 | P0 |
| TC-C3-04 | 전체 통화 기록 페이지 Feed 확인 | Feed 형식으로 표시됨 | P0 |
| TC-C3-05 | 페이지네이션 작동 확인 | 10개씩 표시, 이전/다음 버튼 작동 | P0 |
| TC-C3-06 | 통화 상세 리포트 버튼 클릭 확인 | 전체 페이지로 이동 | P0 |

---

### **4.4. Phase 4: 설정 및 고도화**

#### **D-1: 정보 수정 및 관리**

**Acceptance Criteria:**
- [ ] 설정 페이지에서 프로필 정보 수정 가능
- [ ] 설정 페이지에서 통화 스케줄 수정 가능
- [ ] 스케줄 ON/OFF 토글 작동
- [ ] 수정 내용이 DB에 저장됨
- [ ] 수정 내용이 즉시 프롬프트에 반영됨 (건강 정보 수정 시)
- [ ] APScheduler가 업데이트된 스케줄을 반영함
- [ ] 저장 완료 시 토스트 알림 표시
- [ ] 수정 모드에서만 삭제 버튼 표시

**테스트 케이스:**
| TC-ID | 테스트 케이스 | 예상 결과 | 우선순위 |
| :--- | :--- | :--- | :--- |
| TC-D1-01 | 프로필 정보 수정 및 저장 확인 | DB에 수정 내용 정확히 저장됨 | P0 |
| TC-D1-02 | 통화 스케줄 수정 및 저장 확인 | DB 및 APScheduler에 반영됨 | P0 |
| TC-D1-03 | 스케줄 ON/OFF 토글 작동 확인 | 토글 상태 정확히 반영됨 | P0 |
| TC-D1-04 | 건강 정보 수정 시 프롬프트 반영 확인 | 프롬프트에 즉시 반영됨 | P0 |
| TC-D1-05 | 저장 완료 시 토스트 알림 확인 | "저장되었습니다" 알림 표시 | P1 |
| TC-D1-06 | 수정 모드에서 삭제 버튼 표시 확인 | 수정 모드에서만 삭제 버튼 표시 | P1 |

---

## **5. 테스트 환경 (Test Environment)**

### **5.1. 환경 구성**

| 환경 | 용도 | 데이터 | 접근 권한 |
| :--- | :--- | :--- | :--- |
| **개발 환경** | 개발자 로컬 테스트 | Mock 데이터 | 개발팀 |
| **테스트 환경** | 통합 테스트, E2E 테스트 | 테스트 데이터 | 개발팀, QA |
| **스테이징 환경** | 최종 검증, 사용자 테스트 | 프로덕션 유사 데이터 | 개발팀, QA, 제한된 사용자 |
| **프로덕션 환경** | 실제 서비스 | 실제 데이터 | 최종 사용자 |

### **5.2. 테스트 환경 요구사항**

**인프라:**
- Vapi 개발 계정 및 API 키
- APScheduler 실행 환경
- 데이터베이스 (개발/테스트용)
- 이메일 발송 서비스 (테스트 모드)

**도구:**
- 테스트 자동화 도구 설치
- 모니터링 도구 설정
- 로그 수집 시스템

---

## **6. 테스트 일정 (Test Schedule)**

### **6.1. Phase별 테스트 일정**

| Phase | 테스트 활동 | 담당자 | 기간 |
| :--- | :--- | :--- | :--- |
| **Phase 1** | 단위 테스트, 통합 테스트, 기능 테스트 | 개발팀, QA | 1주차 |
| **Phase 2** | 단위 테스트, 통합 테스트, 성능 테스트, E2E 테스트 | 개발팀, QA | 2주차 |
| **Phase 3** | 단위 테스트, 통합 테스트, 데이터 무결성 테스트, E2E 테스트 | 개발팀, QA | 3주차 |
| **Phase 4** | 통합 테스트, 전체 시스템 테스트, 사용성 테스트 | 개발팀, QA | 4주차 |

### **6.2. 테스트 활동 타임라인**

- **개발 중:** 단위 테스트 (지속적)
- **기능 완료 시:** 통합 테스트
- **Phase 종료 시:** E2E 테스트, 성능 테스트
- **MVP 완료 시:** 전체 시스템 테스트, 사용성 테스트

---

## **7. 리스크 및 대응 방안 (Risks & Mitigation)**

| 리스크 | 영향도 | 확률 | 대응 방안 |
| :--- | :--- | :--- | :--- |
| **Vapi API 장애** | 높음 | 중간 | Mock 서버 구축, 재시도 로직 강화 |
| **데이터 유실** | 매우 높음 | 낮음 | 데이터 검증 로직 강화, 모니터링 시스템 구축 |
| **성능 목표 미달** | 중간 | 중간 | 성능 최적화, 부하 테스트 조기 수행 |
| **테스트 일정 지연** | 중간 | 중간 | 테스트 자동화 강화, 병렬 테스트 수행 |
| **환각(Hallucination)** | 높음 | 중간 | 프롬프트 최적화, 수동 검증 강화 |
| **통화 상세 리포트 UI 복잡성** | 중간 | 낮음 | 컴포넌트 분리, 단계적 구현 |

---

## **8. 테스트 완료 기준 (Test Completion Criteria)**

### **8.1. 기능별 완료 기준**

- [ ] 모든 Acceptance Criteria (AC) 100% 충족
- [ ] 모든 P0 우선순위 테스트 케이스 통과
- [ ] P1 우선순위 테스트 케이스 90% 이상 통과
- [ ] 단위 테스트 커버리지 80% 이상
- [ ] 통합 테스트 핵심 플로우 100% 통과
- [ ] E2E 테스트 사용자 시나리오 100% 통과

### **8.2. 시스템 전체 완료 기준**

- [ ] 데이터 파이프라인 무결성 검증 완료 (유실률 0%)
- [ ] 통화 발신 성공률 95% 이상
- [ ] 리포트 생성 실패율 1% 미만
- [ ] AI 대화 완결성 80% 이상
- [ ] 핵심 정보 질문 수행률 90% 이상
- [ ] 리포트 요약 정확도 90% 이상
- [ ] 통화 상세 리포트 페이지 정상 작동
- [ ] 성능 목표 달성 (Latency, 처리 시간)
- [ ] 보안 검토 완료
- [ ] 사용성 검토 완료

---

## **9. 테스트 결과 보고 (Test Reporting)**

### **9.1. 보고 형식**

- **일일 테스트 진행 상황:** 테스트 실행 현황, 발견된 이슈
- **Phase별 테스트 리포트:** 테스트 결과 요약, 커버리지, 이슈 목록
- **최종 테스트 리포트:** 전체 테스트 결과, 완료 기준 달성 여부, 권장 사항

### **9.2. 이슈 관리**

- 이슈 추적 시스템 사용 (Jira, GitHub Issues 등)
- 우선순위별 분류 (Critical, High, Medium, Low)
- 해결 상태 추적

---

## **10. 참고 자료 (References)**

- 스프린트 백로그 및 계획 v2.0
- MVP Scope Matrix 및 PRD
- 전체 서비스 기획 및 UX 설계 v3.0
- 정보 구조도 (Text-based-IA) v3.0
- API 명세서
- 데이터 모델 설계 문서

---

## **11. 주요 변경 사항 (v1.0 → v2.0)**

1. ✅ **통화 상세 리포트 구조 변경:**
   - 모달에서 전체 페이지(`/call-history/[id]`)로 변경
   - 2컬럼 레이아웃 상세화
   - 별도 테스트 케이스 추가

2. ✅ **대시보드 통화 기록 UI 테스트 추가:**
   - 최근 통화 기록 및 전체 통화 기록 별도 테스트 케이스

3. ✅ **건강 정보 선택 입력 명확화:**
   - 건강 정보는 선택 입력이며, 입력하지 않아도 온보딩 완료 가능

4. ✅ **온보딩 가이드 및 완료 화면 테스트 추가:**
   - 3-Step Slider 가이드 화면 테스트
   - 온보딩 완료 화면 테스트 (초대 코드 포함)

5. ✅ **MVP 범위 명확화:**
   - 실시간 대화(`/chat`)와 온기 리포트(`/report`)는 MVP 제외

6. ✅ **UX/UI 품질 검증 강화:**
   - 통화 상세 리포트 페이지 레이아웃 검증
   - 반응형 디자인 검증
   - 내부 스크롤 동작 검증

---

**문서 버전:** v2.0  
**최종 업데이트:** 2025-11-24

